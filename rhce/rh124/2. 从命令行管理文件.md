# 2. 从命令行管理文件

## Linux 文件系统层次结构

* 文件系统层次结构

### 文件系统层次结构

组织到一个颠倒的目录树中, 称为文件系统层次结构. 树根在该层次结构的顶部, 树根的下方延伸出目录和子目录的分支.

* `/`是根目录, 位于文件系统层次结构的顶部.
	* `/`还用做文件名的目录分隔符

#### 重要的目录

* 术语
	* 静态, 保持不变的内容, 除非以显示方式编辑或重新配置.
	* 动态或可变, 通常由活动进程修改或附加的内容.
	* 永久, 在重启后依然保留的内容, 尤其是配置设置.
	* 运行时, 重启期间清除的进程或系统特定内容或属性.

##### `/usr`

安装的软件, 共享的库.

* `/usr/bin`: 用户命令
* `/usr/sbin`: 系统管理命令
* `/usr/local`: 本地自定义软件

##### `/etc`

特定于此系统的配置文件

##### `/var`

特定于此系统的**可变**数据, 在系统启动之间保持持久性. 动态变化的文件

* 数据库
* 缓存目录
* 日志文件
* 打印机后台处理文档
* 网站内容

可以在`/var`下找到

##### `/run`

自**上一次系统启动以来**启动的进程的运行时数据. 进程`ID`文件和锁定文件. **此目录的内容在重启时重新创建**.

##### `/hom`

普通用户存储其个人数据和配置文件的主目录.

##### `/root`

管理超级用户`root`的主目录.

##### `/tmp`

供临时文件使用的全局可写空间. **10**天内未访问, 未更改或未修改的文件将从该目录中删除.

`/var/tmp`, 该目录中的文件如果在**30**天内未曾访问, 更改或修改过, 将被自动删除.

##### `/boot`

开启启动过程所需的文件

##### `/dev`

包括特殊的设备文件, **供系统用于访问硬件**.

## 根据名称查找文件

* 绝对路径和相对路径
* 导航路径

### 绝对路径和相对路径

#### 1. 绝对路径

是完全限定名称, **自根目录(`/`)开始**, 指定到达唯一代表单个文件所遍历的每个子目录.

#### 2. 相对路径

指定**从工作目录**到达该文件所需的路径.

#### 限制

文件路径名长度(包含所有`/`字符)不可超过`4095`字节.

路径名中通过`/`字符隔开的每一部分的长度不可超过`255`字节.

区分大小写.

### 导航路径

* `pwd`命令显示当前位置的完整路径名.
* `ls`列出指定目录的目录内容. 如果未指定目录, 则列出当前目录的内容.
* `cd`可更改目录. 任何时候仅执行`cd`可以返回用户的主目录.
* `shell`程序提示符仅显示当前目录路径的最后一个部分.
* 如果用户的当前目录是其主目录时. 提示符显示 波形符(`~`)字符.
* `touch`命令通常可将文件的时间戳更新为当前的日期和时间, 而不作其他修改.
	* 还可用于创建空文件
* `.`是当前目录
* `..`是父目录
	* `cd ..`进入到父目录
* 开头为`.`的文件名表示隐藏文件.

## 使用命令行工具管理文件

* 命令行文件管理

### 命令行文件管理

* 复制文件
	* 单一来源: `cp file1 file2`
	* 多来源: `cp file1 file2 file3 dir`
* 移动文件
	* 单一来源: `mv file1 file2` 
	* 多来源: `mv file1 file2 file3 dir`
* 删除文件
	* 单一来源: `rm file1`
	* 多来源: `rm -f file1 file2 file3`
* 创建目录
	* 单一来源: `mkdir dir`
	* 多来源: `mkdir -p par1/par2/dir`
* 复制目录
	* 单一来源: `cp -r dir1 dir2`
	* 多来源: `cp -r dir1 dir2 dir3 dir4`
* 移动目录
	* 单一来源: `mv dir1 dir2`
	* 多来源: `mv dir1 dir2 dir3 dir4`
* 删除目录
	* 单一来源: `rm -r dir1`
	* 多来源: `rm -rf dir1 dir2 dir3`
	* `rmdir`: 命令仅能删除空目录

## 使用路径名扩展匹配文件名

* 路径名扩展

### 路径名扩展

#### `*`和`?`简单模式匹配项

* `*`: 匹配`0`个或以上字符组成的任何字符串
* `?`: 任何一个字符

#### 波浪符

`~`: 当前用户的主目录

* `~username`: `username`用户的主目录
* `~+`: 当前工作目录
* `~-`: 上一工作目录

#### 大括号扩展

大括号扩展用于生成任意字符串. 大括号包含字符串的逗号分隔列表或顺序表达式. 大括号可以互相嵌套. 可以同时生成多个文件.

```
[ansible@bunker test]$ touch {a,b,c}-test
[ansible@bunker test]$ ls
a-test  b-test  c-test
[ansible@bunker test]$ rm ?-test
[ansible@bunker test]$ ls
[ansible@bunker test]$
```

#### 命令替换

允许输出替换命令本身.

* $(command): 建议使用
* \`command\`(反引号): 旧, 反引号无法嵌套在反引号内

发生命令替换.

#### 防止参数被扩展

`\`是`Bash`中一个转义字符, 防止其后一个字符被特殊符解释.

如果要包含较长的字符串, 使用单引号(')或双引号(")来括起字符串.

单引号可以按字面解译所有的文本.

**单引号和双引号针对命令替换的区别**

```
[ansible@bunker ~]$ echo '$(date)'
$(date)
[ansible@bunker ~]$ echo "$(date)"
Fri Aug  9 17:01:54 CST 2019
```