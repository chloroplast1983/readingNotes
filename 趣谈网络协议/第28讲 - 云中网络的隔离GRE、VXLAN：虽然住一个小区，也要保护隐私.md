# 第28讲 | 云中网络的隔离GRE、VXLAN：虽然住一个小区，也要保护隐私

## 笔记

### 云平台隔离

`VLAN`只有`12`位, 共`4096`个. 现在不够用.

方案:

* 修改这个协议
* 扩展
	* 原来基础上扩展出一个头, 里面包含足够用于区分租户的`ID`, 外层的包的格式尽量和传统的一样, 依然兼容原来的格式. 一旦遇到需要区分用户的地方, 就用这个特殊的程序, 来处理这个特殊的包的格式.
	* 如隧道理论中的扩展头是用于加密的, 现在需要的包头是要能够区分用户的.

### Underlay 和 Overlay

* 底层的物理网络设备组成的网络我们称为`Underlay`网络.
* 虚拟机和云中的这些技术组成的网络称为`Overlay`网络, 这是一种基于物理网络的虚拟化网络实现.

### GRE

`Generic Routing Encapsulation`, 是一种`IP-over-IP`的隧道技术. 将`IP`包封装在`GRE`包里, 外面加上`IP`头, 在隧道的一端封装数据包, 并在通路上进行传输, 到另外一端的时候解封装. 可以认为`Tunnel`是一个虚拟的, 点对点的连接.

![](./img/28_01.jpg)



## 扩展