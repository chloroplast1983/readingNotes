# 13.配置SHELL环境

## 更改 Shell 环境

* 环境变量
* bash 启动脚本
* 使用 alias
* 使用函数

### 环境变量

`shell`和脚本使用变量存储数据. 某些变量可以与其内容一起传递到子进程. 这些特殊变量称为**环境变量**. 使变量称为环境变量的前提是, 它们已在`shell`中导出. 标记为导出的变量及其值将传递到从`shell`生成的任何子进程.  用户可以使用`env`命令查看在其`shell`中定义的所有环境变量.

使用`export`将变量标记为环境变量导出, 后者将传递到子`shell`.

### bash 启动脚本

使用环境变量, 用户登陆后初始化`bash`环境. 用户登录时, 执行:

* `/etc/profile`
* `~/.bash_profile`

**bash shell**将在用户的主目录查找一下三个文件之一: `.bash_profile`,`.bash_login`或`.profile`. `shell`将按照**给定顺序查找文件, 并且将执行其找到的第一个文件**.

#### bash 登录脚本执行顺序

```
/etc/profile
    ->/etc/profile.d/*.sh
    
~/.bash_profile
    ->~/.bashrc
      ->/etc/bashrc
```

两种类型登录脚本:

* 配置文件, 仅在登录`shell`中执行
* "RC", 每次创建`shell`时执行**RC**, 无论是登录还是非登录

配置文件用于:

* 设置和导出环境变量
* 运行仅应在**登录后**运行的命令

RC:

* 运行命令
* 设置别名
* 定义函数
* 无法导出到子`shell`的其他设置

### 使用 alias

`alias`, 管理员或用户可向系统定义自己的命令或者覆盖现有系统命令的使用.

使用`alias`命令来设置别名. 定义的别名仅在当前`shell`的持续期间存在.

```
alias mycomm="<command to execute>"
```

要将别名持久化, 用户需要在其`~/.bashrc`的底部添加该命令.

删除别名`unalias`.

### 使用函数

函数是一种隔离代码段的方法, 以便可以重复调用代码段而无需重新编写整个代码段. 可以在`bash shell`环境中设置函数. 在环境中设置时, 函数可以在命令行中作为命令来执行, 类似于别名. 函数可以采用参数.

`set`命令将显示当前`shell`环境中的所有函数和变量.

要从环境中删除某个函数, 用户或管理员可以使用`unset`命令, 同时传递要删除的函数或变量名称.